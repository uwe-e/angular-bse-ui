angular.module("bse.ui",["bse.ui.core","bse.ui.application","bse.ui.filterbar","bse.ui.icontabs","bse.ui.listreport","bse.ui.tiles","bse.ui.views"]),angular.module("bse.ui.core",[]).service("$bsecore",function(){var a=function(){this.directions={none:1,forward:2,backward:3}};return new a}),angular.module("bse.ui.application",["bse.ui.core","ui.router"]).run(function(a,b,c){a.directions=c.directions,b.$on("$stateChangeStart",function(a,c,d,e,f,g){var h=g.direction;h||(h=a.currentScope.$state.directions.backward),b.$emit("onViewChangeStart",h)})}).config(function(a){a.decorator("$state",function(a){var b=a;b.baseGo=b.go,b.goBack=function(a,b,c){c=c||{},angular.isUndefined(c.direction)&&(c.direction=this.directions.backward),this.baseGo(a,b,c)},b.goSelf=function(a,b,c){c=c||{},angular.isUndefined(c.direction)&&(c.direction=this.directions.none),this.baseGo(a,b,c)};var c=function(a,b,c){c=c||{},angular.isUndefined(c.direction)&&(c.direction=this.directions.forward),this.baseGo(a,b,c)};return b.go=c,a})}).controller("BseApplicationController",["$scope","$element","$attrs","$bsecore",function(a,b,c,d){a.$on("onViewChangeStart",function(a,c){b.removeClass("slide-back"),b.removeClass("slide-forward"),c===d.directions.forward?b.addClass("slide-forward"):c===d.directions.backward&&b.addClass("slide-back")})}]).directive("bseApplicationContent",function(){return{controller:"BseApplicationController",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/application/content.html"}}}),angular.module("bse.ui.filterbar",[]).directive("bseFilterBar",["$animate","$q","$parse","$injector",function(a,b,c,d){var e=d.has("$animateCss")?d.get("$animateCss"):null;return{transclude:!0,replace:!0,scope:{textgo:"@",texthide:"@",textshow:"@",collapse:"=",onExecute:"&onExecute"},templateUrl:function(a,b){return b.templateUrl||"template/filterbar/filterbar.html"},controller:["$scope","$element",function(d,f){function g(a){a?j():h()}function h(){r.hasClass("collapse")&&r.hasClass("in")||b.resolve(l(d)).then(function(){q[0].textContent=d.texthide,r.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),e?e(r,{addClass:"in",easing:"ease",to:{height:r[0].scrollHeight+"px"}}).start()["finally"](i):a.addClass(r,"in",{to:{height:r[0].scrollHeight+"px"}}).then(i())})}function i(){r[0].removeClass("collapsing").addClass("collapse").css({height:"auto"}),m(d)}function j(){return r.hasClass("collapse")||r.hasClass("in")?void b.resolve(n(d)).then(function(){q[0].textContent=d.textshow,r.css({height:r[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),e?e(r,{removeClass:"in",to:{height:"0"}}).start()["finally"](k):a.removeClass(r,"in",{to:{height:"0"}}).then(k())}):k()}function k(){r.css({height:"0"}).removeClass("collapsing").addClass("collapse"),o(d)}var l,m,n,o;d.texthide=d.texthide||"Hide Filter Bar",d.textshow=d.textshow||"Show Filter Bar";var p=angular.element(f[0].querySelector("button.btn-execute-filter"));p&&p.on("click",function(a){d.onExecute(a)});var q=angular.element(f[0].querySelector("button.btn-collapse-filterbar"));q&&q.on("click",function(a){d.collapse=!d.collapse,r&&g(d.collapse)});var r=angular.element(f[0].querySelector("div [bse-filter-bar-collapse]"));r&&(l=c(r[0].querySelector("[expandingExpr]")),m=c(r[0].querySelector("[expanded]")),n=c(r[0].querySelector("[collapsing]")),o=c(r[0].querySelector("[collapsed]")),g(d.collapse))}]}}]),angular.module("bse.ui.icontabs",[]).controller("BseIconTabsetController",["$scope",function(a){function b(a){for(var b=0;b<d.tabs.length;b++)if(d.tabs[b].index===a)return b}var c,d=this;d.tabs=[],d.select=function(a){if(!e){var f=b(c),g=d.tabs[f];g&&(g.tab.onDeselect(),g.tab.active=!1);var h=d.tabs[a];h?(h.tab.onSelect(),h.tab.active=!0,d.active=h.index,c=h.index):!h&&angular.isNumber(c)&&(d.active=null,c=null)}},d.addTab=function(a){d.tabs.push({tab:a,index:a.index})},d.removeTab=function(a){var c=b(a.index);if(a.index===d.active){var e=c===d.tabs.length-1?c-1:c+1%d.tabs.length;d.select(e)}d.tabs.splice(c,1)},a.$watch("tabset.active",function(a){angular.isNumber(a)&&a!==c&&d.select(b(a))});var e;a.$on("$destroy",function(){e=!0})}]).directive("bseIconTabset",function(){return{transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/icontabs/icontabset.html"},controller:"BseIconTabsetController",restrict:"EA"}}).directive("bseIconTab",["$document",function(a){return{require:"^BseIconTabset",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/icontabs/icontab.html"},restrict:"EA",controller:function(){},scope:{text:"@",count:"@",icon:"@",orientation:"@",color:"@",onSelect:"&select",onDeselect:"&deselect"},link:function(b,c,d,e,f){function g(b,c){var d;return angular.isDefined(b)&&(d=angular.element(a[0].createElement(c))),d}function h(b,c){var d=g(b,c);if(d){var e=a[0].createTextNode(b);e&&d.append(e)}return d}var i,j=angular.element(c[0]),k=angular.element(c[0].querySelector(".icon-tab-item-icon-pane")),l=angular.element(c[0].querySelector(".icon-tab-item-text")),m=angular.element(c[0].querySelector(".icon-tab-item-arrow"));j.addClass("tab-item-orientation-vertical");var n=d.color;angular.isDefined(n)||(n="tab-primary");var o=g(d.icon,"div");o&&(i=!0,o.addClass("icon-container "+n+" glyphicon "+d.icon),k.append(o));var p=h(d.count,"span");p&&(p.addClass("icon-tab-item-count"),k.append(p),b.$watch("count",function(a){p[0].textContent=a}));var q=angular.isDefined(d.text);if(q){var r=a[0].createTextNode(d.text);l.append(r)}else l.remove();m.addClass(n),q&&!i&&j.addClass("icon-tab-text-only"),angular.isUndefined(d.index)&&(e.tabs&&e.tabs.length?b.index=Math.max.apply(null,e.tabs.map(function(a){return a.index}))+1:b.index=0),b.select=function(){for(var a,c=0;c<e.tabs.length;c++)if(e.tabs[c].tab===b){a=c;break}e.select(a)},e.addTab(b),b.$on("$destroy",function(){e.removeTab(b)})}}}]),angular.module("bse.ui.listreport",[]).directive("bseListReport",function(){return{transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/listreport/listreport.html"}}}).directive("bseListReportToolbar",function(){return{transclude:!0,replace:!0,require:["^bseListReport","bseListReportToolbar"],templateUrl:function(a,b){return b.templateUrl||"template/listreport/toolbar.html"},restrict:"EA",scope:{title:"@"},controller:function(){this.setTitle=function(a){this.title=a}}}}),angular.module("bse.ui.tiles",[]).directive("bseTileContainer",function(){return{transclude:!0,replace:!0,templateUrl:"template/tiles/tilecontainer.html",restrict:"EA",scope:{title:"@"},controller:function(){this.setTitle=function(a){this.title=a}}}}).directive("bseTileContainerHeaderTransclude",function(){return{require:"^bseTileContainer",link:function(a,b,c,d){a.$watch(function(){return d[c.mchTileContainerHeaderTransclude]},function(a){if(a){var c=angular.element(b[0].querySelector("[ui-tile-header-title]"));c.html(""),c.append(a)}})}}}),angular.module("bse.ui.views",[]).run(function(a,b){b.$on("$stateChangeStart",function(a,c,d,e,f){var g;e.slideBack&&(g=!0),b.$emit("onHistoryDirectionChanged",g)})}).controller("BseViewController",["$scope","$element","$attrs",function(a,b,c){function d(a,b){if(a&&a[0]&&a[0]!==document){var c=a[0].querySelector(b);return c?c:d(a.parent(),b)}}a.$on("onHistoryDirectionChanged",function(a,c){c?b.addClass("slide-back"):b.removeClass("slide-back")}),this.resizeElement=function(a){var b=d(a,".view-content");if(b){var c=10,e=b.querySelector(".filterbar")||b.querySelector(".icon-tabbar");e&&(c+=e.offsetHeight);var f=d(a,".list-report");f&&angular.forEach(f.children,function(b){b!=a[0]&&(c+=b.offsetHeight)}),a[0].style.height=b.clientHeight-c+"px"}},this.resizeContent=function(a){var b=a.parent();if(b){var c=0,d=0,e=b[0].querySelector(".view-header");e&&(c=e.offsetHeight+"px");var f=b[0].querySelector(".view-footer");f&&(d=f.offsetHeight+"px");var g=b[0].querySelector(".view-content");g&&(g.style.top=c,g.style.bottom=d)}}}]).directive("bseView",function(){return{controller:"BseViewController",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/views/view.html"}}}).directive("bseViewContent",function(){return{controller:"BseViewController",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/views/content.html"},link:function(a,b,c,d){d.resizeContent(b)}}}).directive("bseViewHeader",function(){return{transclude:!0,replace:!0,require:["^bseView","bseViewHeader"],templateUrl:function(a,b){return b.templateUrl||"template/views/header.html"},restrict:"EA",scope:{title:"@"},controller:function(){this.setTitle=function(a){this.title=a}},link:function(a,b,c,d){var e=d[0];e&&e.resizeContent(b)}}}).directive("bseViewFooter",function(){return{require:"^bseView",transclude:!0,replace:!0,templateUrl:function(a,b){return b.templateUrl||"template/views/footer.html"},link:function(a,b,c,d){d.resizeContent(b)}}}).directive("bseViewHeaderNavigation",function(){return{transclude:!0,restrict:"EA",replace:!0,require:"^bseViewHeader",templateUrl:function(a,b){return b.templateUrl||"template/views/headernavigation.html"},link:function(a,b,c,d,e){d.setTitle(e(a,angular.noop))}}}).directive("bseAutoResize",function(a,b){return{require:"^bseViewContent",restrict:"A",link:function(c,d,e,f){a(function(){f.resizeElement(d)}),angular.element(b).bind("resize",function(){f.resizeElement(d)})}}}).directive("bseOverflowPanel",function(a){return{transclude:!0,replace:!0,scope:{isLoading:"=?",useWindowSize:"=?"},templateUrl:function(a,b){return b.templateUrl||"template/views/overflowpanel.html"},link:function(b,c,d){b.$eval(d.useWindowSize)&&a.find("body").append(c),b.$watch("isLoading",function(a){c.css("display",a?"block":"none")}),b.$on("$destroy",function(){a[0].querySelector("body > div.overflowpanel")&&c.remove()})}}}).directive("bseMessagePanel",["$document",function(a){return{transclude:!0,replace:!0,scope:{text:"@",icon:"@",description:"@",isOpen:"=?"},templateUrl:function(a,b){return b.templateUrl||"template/views/messagepanel.html"},link:function(b,c,d){function e(b,c){var d=f(b,c);if(d){var e=a[0].createTextNode(b);e&&d.append(e)}return d}function f(b,c){var d;return angular.isDefined(b)&&(d=angular.element(a[0].createElement(c))),d}var g=angular.element(c[0].querySelector(".panel-body")),h=f(d.icon,"span");h&&(h.addClass("messagepannel-icon "+d.icon),g.append(h));var i=e(d.text||"No matching items found.","span");i&&(i.addClass("messagepannel-maintext"),g.append(i));var j=e(d.description,"span");j&&(j.addClass("messagepannel-description"),g.append(j)),b.$watch("isOpen",function(a){c.css("display",a?"block":"none")})}}}]);